<% if authenticated? %>

  <h1>Hello <%= current_user.username %></h1>
    <a href="/sign_out">sign out</a>

  <% if @user == current_user %>
    <div class='tweet_box'>
      <form id='create_tweet' method='post' action='/post_tweet'>
        <textarea name='comments' cols='25' rows='5'></textarea><br>
        <input type='submit' value='Post Tweet' />
      </form>
    </div>
  <% end %>

  <div class="container">
    <h1>Welcome to Tweet Box</h1>
    <p>You're just a tweet away from being popular again...</p>

  <div id='tweet_list'>
    <ol>
      <% if @tweets %>
    <%@tweets.each do |i| %>
         <li style="background-color: #F8F8F8"><p>
          Added <%= ((Time.now - i.created_at) / 60).ceil %> minute(s) ago.</p>
         <%=i.tweet %></li>
         <%end%>
        <%end%>
       </ll>
    </div>
  </div>

  <% if false %>
  <div class="container">
    <h1>Tweet Now! 2: Multi-User</h1>

    <%
      # In our real-world application, this is not what we want. Instead, we should
      # be checking to see if there is currently a user logged-in, and if there is,
      # we should show her a form that will allow her to send a tweet. If there is no
      # user logged-in, we should show the sign-in button.
    %>
    <% if @access_token %>
      <div>
        <p>
          <strong>token:</strong> <%= @access_token.token %><br>
          <strong>secret:</strong> <%= @access_token.secret %><br>
        </p>
        <p>
          <button><a href="/sign_out">Sign Out</a></button>
        </p>
      </div>
    <% else %>
      <button><a href="/sign_in">Sign In with Twitter</a></button>
    <% end %>
    
  </div>
  <% end %>

<% else %>

  <h1> Welcome to my app </h1>
  <a href="/sign_in">Please sign in </a>

<% end %>
